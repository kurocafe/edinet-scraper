# 要件定義書：EDINET APIスクレイパー

## 1. プロジェクト概要

### 1.1 目的
EDINETのAPIを使用して、複数企業の有価証券報告書などの情報を効率的に収集するツールを開発する。

### 1.2 背景
- 企業の財務情報や開示書類を手動で収集するのは時間がかかる
- EDINET APIを使うことで、プログラムから効率的にデータを取得できる
- Go言語の並行処理を活用して、複数企業のデータを同時に取得したい

## 2. 機能要件

### 2.1 必須機能
- [ ] 指定した日付の提出書類一覧を取得できる
- [ ] 企業名、証券コード、書類種別などの基本情報を取得できる
- [ ] 取得した情報を標準出力に表示できる
- [ ] 複数の日付を指定して、まとめて情報を取得できる

### 2.2 今後追加したい機能（オプション）
- [ ] 取得した情報をCSVファイルに保存
- [ ] 特定の企業（証券コード）のみをフィルタリング
- [ ] 特定の書類種別（有価証券報告書のみ、など）をフィルタリング
- [ ] 実際の書類データ（PDF/XBRL）のダウンロード

## 3. 非機能要件

### 3.1 パフォーマンス
- 複数日付のデータ取得時は、goroutineを使った並行処理で効率化する
- APIのレート制限を考慮し、適切な待機時間を設ける

### 3.2 エラーハンドリング
- APIリクエスト失敗時は、エラーメッセージを表示する
- ネットワークエラー時は、わかりやすいエラーメッセージを出力する
- JSONパースエラー時は、適切にハンドリングする

### 3.3 保守性
- コードは関数単位で分割し、テストしやすい構造にする
- 設定値（APIキー、エンドポイントなど）は定数として管理する

## 4. 制約事項

### 4.1 技術的制約
- EDINET API v2を使用する
- APIキーの取得が必要
- APIには利用規約があるため、遵守する必要がある

### 4.2 データの制約
- 書類一覧APIで取得できるのは過去10年分のデータ
- 取得できる情報は、EDINETに提出された書類のみ

## 5. 使用するAPI

### 5.1 書類一覧API
- **エンドポイント**: `https://api.edinet-fsa.go.jp/api/v2/documents.json`
- **パラメータ**:
  - `date`: 取得したい日付（YYYY-MM-DD形式）
  - `type`: 2（提出書類一覧及びメタデータ）
  - `Subscription-Key`: APIキー

### 5.2 取得できる主な情報
- 書類管理番号（docID）
- 提出者名（filerName）
- 証券コード（secCode）
- EDINETコード（edinetCode）
- 書類種別コード（docTypeCode）
- 提出日時（submitDateTime）

## 6. 開発スケジュール（目安）

1. **Phase 1**: 単一日付の書類一覧取得（基本機能）
2. **Phase 2**: 複数日付の並行処理対応
3. **Phase 3**: フィルタリング機能の追加
4. **Phase 4**: ファイル出力機能の追加

## 7. 成功基準

- [ ] 指定した日付の書類一覧を正常に取得できる
- [ ] エラーが発生した場合、適切なメッセージが表示される
- [ ] 並行処理により、複数日付のデータを効率的に取得できる
- [ ] コードが読みやすく、再利用可能な構造になっている
